!function r(o,i,a){function c(t,e){if(!i[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=i[t]={exports:{}},o[t][0].call(n.exports,function(e){return c(o[t][1][e]||e)},n,n.exports,r,o,i,a)}return i[t].exports}for(var u="function"==typeof require&&require,e=0;e<a.length;e++)c(a[e]);return c}({1:[function(e,t,n){var r,o,i,a,c,u,s,l,f,p,d,y,h=loadRuntime();h.AudioEngine||"function"!=typeof h.createInnerAudioContext||(r={ERROR:-1,INITIALZING:0,PLAYING:1,PAUSED:2,STOPPED:3},o=h.createInnerAudioContext.bind(h),i=Number.MAX_VALUE,a=0,c=10,u=[],s={},l=new WeakMap,f=function(e,t){t.canPlayCallback&&(e.offCanplay(t.canPlayCallback),delete t.canPlayCallback),t.finishCallback&&(e.offEnded(t.finishCallback),delete t.finishCallback),t.errorCallback&&(e.offError(t.errorCallback),delete t.errorCallback),t.waitingCallback&&(e.offWaiting(t.waitingCallback),delete t.waitingCallback),s[t.audioID]&&(delete s[t.audioID],u.length>=c||e.__invalid?e.destroy():u.push(e))},p=function(){var e,t;return u.length?(e=u.pop(),t=l.get(e)):(e=o(),l.set(e,t={}),e.onPlay(function(){l.get(this).state=r.PLAYING}.bind(e)),e.onPause(function(){var e=l.get(this);e.state=r.PAUSED,e.isPausing=!1}.bind(e)),e.onStop(function(){var e=l.get(this);e.state=r.STOPPED,setTimeout(function(){f(this,e)}.bind(this))}.bind(e)),e.onError(function(){var e=l.get(this);e.state=r.ERROR,setTimeout(function(){f(this,e)}.bind(this))}.bind(e)),e.onEnded(function(){var e=l.get(this);e.state=r.ERROR,setTimeout(function(){f(this,e)}.bind(this))}.bind(e))),t.state=r.INITIALZING,{audioContext:e,privateAudioContext:t}},(y={play:function(e){return d(e,1<arguments.length&&void 0!==arguments[1]&&arguments[1],2<arguments.length&&void 0!==arguments[2]?arguments[2]:1)},play2d:function(e){var t,n,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return Object.keys(s).length>=i?-1:(t=(n=p()).audioContext,n=n.privateAudioContext,s[++a]=t,n.audioID=a,t.loop=r,t.volume=o,t.src=e,t.play(),a)},setLoop:function(e){e=s[e];e&&(e.loop=1<arguments.length&&void 0!==arguments[1]&&arguments[1])},isLoop:function(e){e=s[e];return!!e&&e.loop},setVolume:function(e){e=s[e];e&&(e.volume=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1)},getVolume:function(e){e=s[e];return e?e.volume:0},setCurrentTime:function(e,t){e=s[e];e&&e.seek(t)},getCurrentTime:function(e){e=s[e];return e?e.currentTime:0},getDuration:function(e){e=s[e];return e?e.duration:0},getState:function(e){e=s[e];return e?l.get(e).state:y.AudioState.ERROR},setFinishCallback:function(e,t){var n,e=s[e];e&&((n=l.get(e)).finishCallback&&(e.offEnded(n.finishCallback),delete n.finishCallback),"function"==typeof t)&&(n.finishCallback=t.bind(y),e.onEnded(n.finishCallback))},pause:function(e){var t,e=s[e];e&&!(t=l.get(e)).isPausing&&t.state!=y.AudioState.PAUSED&&(t.isPausing=!0,e.pause())},pauseAll:function(){Object.keys(s).forEach(function(e){var e=s[e],t=l.get(e);t.isPausing||t.state==y.AudioState.PAUSED||(t.isPausing=!0,e.pause())})},resume:function(e){var t,e=s[e];e&&((t=l.get(e)).isPausing||t.state===y.AudioState.PAUSED)&&e.play()},resumeAll:function(){var t,n;Object.keys(s).forEach(function(e){t=s[e],!(n=l.get(t)).isPausing&&n.state!==y.AudioState.PAUSED||t.play()})},stop:function(e){e=s[e];e&&e.stop()},stopAll:function(){Object.keys(s).forEach(function(e){s[e].stop()})},setMaxAudioInstance:function(e){"number"==typeof e&&(i=e)},getMaxAudioInstance:function(){return i},uncache:function(e){for(var t,n=u.length;n--;)(t=u[n]).src===e&&(u.splice(n,1),t.destroy())},uncacheAll:function(){u.forEach(function(e){e.destroy()}),u=[]},preload:function(e,t){var n,r,o,i=p(),a=i.audioContext,i=i.privateAudioContext;"function"==typeof t&&(i.canPlayCallback=(n=a,r=i,o=t,function(){n.offCanplay(r.canPlayCallback),delete r.canPlayCallback,o.bind(y)(),u.length>=c||n.__invalid?n.destroy():u.push(n)}),a.onCanplay(i.canPlayCallback),a.src=e)},setWaitingCallback:function(e,t){var n,e=s[e];e&&((n=l.get(e)).waitingCallback&&(e.offWaiting(n.waitingCallback),delete n.waitingCallback),"function"==typeof t)&&(n.waitingCallback=t.bind(y),e.onWaiting(n.waitingCallback))},setErrorCallback:function(e,t){var n,e=s[e];e&&((n=l.get(e)).errorCallback&&(e.offError(n.errorCallback),delete n.errorCallback),"function"==typeof t)&&(n.errorCallback=t.bind(y),e.onError(n.errorCallback))},setCanPlayCallback:function(e,t){var n,e=s[e];e&&((n=l.get(e)).canPlayCallback&&(e.offCanplay(n.canPlayCallback),delete n.canPlayCallback),"function"==typeof t)&&(n.canPlayCallback=t.bind(y),e.onCanplay(n.canPlayCallback))}}).AudioState=Object.assign({},r),d=y.play2d.bind(y),h.AudioEngine=y)},{}],2:[function(e,t,r){!function(n){!function(){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p,e;p="undefined"!=typeof self&&self||"undefined"!=typeof window&&window||void 0!==n&&n||(void 0).content||void 0,e=function(f){if(f.URL=p.URL||p.webkitURL,p.Blob&&p.URL)try{return void new Blob}catch(e){}var i=p.BlobBuilder||p.WebKitBlobBuilder||p.MozBlobBuilder||(()=>{function y(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]}function e(){this.data=[],this._arrayBuffer=new w}function h(e,t,n){this.data=e,this.size=e.length,this.type=t,this.encoding=n,this._arrayBuffer=new w}function m(e){this.code=this[this.name=e]}var t=e.prototype,n=h.prototype,b=p.FileReaderSync,r="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),o=r.length,i=p.URL||p.webkitURL||f,a=i.createObjectURL,c=i.revokeObjectURL,u=i,s=p.btoa,v=p.atob,w=p.ArrayBuffer,g=p.Uint8Array,l=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(h.fake=n.fake=!0;o--;)m.prototype[r[o]]=o+1;return(u=i.createObjectURL?u:f.URL=function(e){var t=document.createElementNS("http://www.w3.org/1999/xhtml","a");return t.href=e,"origin"in t||("data:"===t.protocol.toLowerCase()?t.origin=null:(e=e.match(l),t.origin=e&&e[1])),t}).createObjectURL=function(e){var t=e.type;return null===t&&(t="application/octet-stream"),e instanceof h?(t="data:"+t,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):s?t+";base64,"+s(e.data):t+","+encodeURIComponent(e.data)):a?a.call(i,e):void 0},u.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&c&&c.call(i,e)},t.append=function(e){var t=this.data;if(e instanceof w){for(var n="",r=new g(e),o=0,i=r.length;o<i;o++)n+=String.fromCharCode(r[o]);t.push(n),this._arrayBuffer=e.slice(0)}else if("Blob"===y(e)||"File"===y(e)){if(!b)throw new m("NOT_READABLE_ERR");var a=new b;t.push(a.readAsBinaryString(e)),this._arrayBuffer=e.arrayBuffer()}else if(e instanceof h)"base64"===e.encoding&&v?t.push(v(e.data)):"URI"===e.encoding?t.push(decodeURIComponent(e.data)):"raw"===e.encoding&&t.push(e.data),this._arrayBuffer=e._arrayBuffer.slice(0);else{"string"!=typeof e&&(e+="");for(var c=unescape(encodeURIComponent(e)),u=(t.push(c),c.length),s=new Array(4*u),l=0,f=0;f<u;f++){var p,d=c.charCodeAt(f);d<128?s[l++]=d:d<2048?(p=("000"+(p=d.toString(2))).slice(-11),s[l++]=parseInt("110"+p.substr(0,5),2),s[l++]=parseInt("10"+p.substr(5,6),2)):d<65536?(p=("0000"+(p=d.toString(2))).slice(-16),s[l++]=parseInt("1110"+p.substr(0,4),2),s[l++]=parseInt("10"+p.substr(4,6),2),s[l++]=parseInt("10"+p.substr(10,6),2)):d<2097152&&(d=("00000000"+(d=d.toString(2))).slice(-21),s[l++]=parseInt("11110"+d.substr(0,3),2),s[l++]=parseInt("10"+d.substr(3,6),2),s[l++]=parseInt("10"+d.substr(9,6),2),s[l++]=parseInt("10"+d.substr(15,6),2))}s.length=l,this._arrayBuffer=new g(s).buffer}},t.getBlob=function(e){arguments.length||(e=null);e=new h(this.data.join(""),e,"raw");return e._arrayBuffer=this._arrayBuffer,e},t.toString=function(){return"[object BlobBuilder]"},n.slice=function(e,t,n){var r=arguments.length,r=(r<3&&(n=null),new h(this.data.slice(e,1<r?t:this.data.length),n,this.encoding));return this._arrayBuffer instanceof w&&(r._arrayBuffer=this._arrayBuffer.slice(e,t)),r},n.toString=function(){return"[object Blob]"},n.close=function(){this.size=0,delete this.data},n.arrayBuffer=function(){return this._arrayBuffer.slice(0)},e})(),e=(f.Blob=function(e,t){var t=t&&t.type||"",n=new i;if(e)for(var r=0,o=e.length;r<o;r++)Uint8Array&&e[r]instanceof Uint8Array?n.append(e[r].buffer):n.append(e[r]);t=n.getBlob(t);return!t.slice&&t.webkitSlice&&(t.slice=t.webkitSlice),t},Object.getPrototypeOf||function(e){return e.__proto__});f.Blob.prototype=e(new f.Blob)},"function"==typeof define&&define.amd?define(["exports"],e):"object"===(void 0===r?"undefined":t(r))&&"string"!=typeof r.nodeName?e(r):e(p)}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,n){function c(e){this.message=e}var u;n=void 0!==n?n:"undefined"!=typeof self?self:$.global,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",(c.prototype=new Error).name="InvalidCharacterError",n.btoa||(n.btoa=function(e){for(var t,n,r=String(e),o=0,i=u,a="";r.charAt(0|o)||(i="=",o%1);a+=i.charAt(63&t>>8-o%1*8)){if(255<(n=r.charCodeAt(o+=.75)))throw new c("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");t=t<<8|n}return a}),n.atob||(n.atob=function(e){var t=String(e).replace(/[=]+$/,"");if(t.length%4==1)throw new c("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,o=0,i=0,a="";r=t.charAt(i++);~r&&(n=o%4?64*n+r:r,o++%4)&&(a+=String.fromCharCode(255&n>>(-2*o&6))))r=u.indexOf(r);return a})},{}],4:[function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=o(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==o(e)?e:e+""))(r.key),r)}}i=function e(t,n,r,o){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.x=t||0,this.y=n||0,this.width=r||0,this.height=o||0,this.left=this.x,this.top=this.y,this.right=this.x+this.width,this.bottom=this.y+this.height},c&&r(i.prototype,c),a&&r(i,a),Object.defineProperty(i,"prototype",{writable:!1});var i,a,c=i;t.exports=c},{}],5:[function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=o(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==o(e)?e:e+""))(r.key),r)}}function a(e,t,n){t=u(t);var r=e,t=c()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n);if(!t||"object"!=o(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=e("./Event"),e=(()=>{function n(e){var t;if(this instanceof n)return t=a(this,n,["devicemotion"]),e?(t._acceleration=e.acceleration||{x:0,y:0,z:0},t._accelerationIncludingGravity=e.accelerationIncludingGravity||{x:0,y:0,z:0},t._rotationRate=e.rotationRate||{alpha:0,beta:0,gamma:0},t._interval=e.interval):(t._acceleration={x:0,y:0,z:0},t._accelerationIncludingGravity={x:0,y:0,z:0},t._rotationRate={alpha:0,beta:0,gamma:0},t._interval=0),t;throw new TypeError("Cannot call a class as a function")}var e,t=n,r=l;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&s(t,r),t=n,(r=[{key:"acceleration",get:function(){return this._acceleration}},{key:"accelerationIncludingGravity",get:function(){return this._accelerationIncludingGravity}},{key:"rotationRate",get:function(){return this._rotationRate}},{key:"interval",get:function(){return this._interval}}])&&i(t.prototype,r),e&&i(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t})();t.exports=e},{"./Event":7}],6:[function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=o(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==o(e)?e:e+""))(r.key),r)}}function a(e,t,n){t=u(t);var r=e,t=c()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n);if(!t||"object"!=o(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=e("./Node"),f=e("./DOMRect"),e=(()=>{function t(){var e;if(this instanceof t)return(e=a(this,t)).className="",e.children=[],e.clientLeft=0,e.clientTop=0,e.scrollLeft=0,e.scrollTop=0,e.style={width:"".concat(window.innerWidth,"px"),height:"".concat(window.innerHeight,"px")},e;throw new TypeError("Cannot call a class as a function")}var e,n=t,r=l;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&s(n,r),n=t,(r=[{key:"clientWidth",get:function(){return 0}},{key:"clientHeight",get:function(){return 0}},{key:"getBoundingClientRect",value:function(){return new f(0,0,window.innerWidth,window.innerHeight)}},{key:"removeAttribute",value:function(e){if("style"===e)for(var t in this.style)this.style[t]="";else this[e]=""}},{key:"setAttribute",value:function(e,t){if("style"===e)if(void 0===t||null==t||""==t)for(var n in this.style)this.style[n]="";else{var r,o,i=(t=t.replace(/\s*/g,"")).split(";");for(r in i)""!=i[r]&&(o=i[r].split(":"),this.style[o[0]]=o[1])}else this[e]=t}},{key:"getAttribute",value:function(e){return"style"==e?JSON.stringify(this.style):this[e]}}])&&i(n.prototype,r),e&&i(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n})();t.exports=e},{"./DOMRect":4,"./Node":22}],7:[function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=o(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==o(e)?e:e+""))(r.key),r)}}i=u,(c=[{key:"type",get:function(){return this._type}},{key:"target",get:function(){return this._target}},{key:"currentTarget",get:function(){return this._currentTarget}},{key:"isTrusted",get:function(){return!1}},{key:"timeStamp",get:function(){return this._timeStamp},set:function(e){this.type.indexOf("touch")&&(this._timeStamp=e)}},{key:"composedPath",value:function(){var e=this._currentTarget;return null===e?[]:[e]}},{key:"eventPhase",get:function(){return this._eventPhase}},{key:"stopPropagation",value:function(){}},{key:"stopImmediatePropagation",value:function(){this._stopped=!0}},{key:"bubbles",get:function(){return!1}},{key:"cancelable",get:function(){return!0}},{key:"preventDefault",value:function(){null!==this._passiveListener?console.warn("Event#preventDefault() was called from a passive listener:",this._passiveListener):this.cancelable&&(this._canceled=!0)}},{key:"defaultPrevented",get:function(){return this._canceled}},{key:"composed",get:function(){return!1}}])&&r(i.prototype,c),a&&r(i,a),Object.defineProperty(i,"prototype",{writable:!1});var i,a,c=i;function u(e,t){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");this._type=e,this._target=null,this._eventPhase=2,this._currentTarget=null,this._canceled=!1,this._stopped=!1,this._passiveListener=null,this._timeStamp=Date.now()}c.NONE=0,c.CAPTURING_PHASE=1,c.AT_TARGET=2,c.BUBBLING_PHASE=3,t.exports=c},{}],8:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=o(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==o(e)?e:e+""))(r.key),r)}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=0,l={touch:{},mouse:{},keyboard:{},devicemotion:{}},a={touch:0,mouse:0,keyboard:0,devicemotion:0},c={touch:null,mouse:null,keyboard:null,devicemotion:null},u={touch:null,mouse:null,keyboard:null,devicemotion:null},s={touch:["touchstart","touchmove","touchend","touchcancel"],mouse:["mousedown","mousemove","mouseup","mousewheel"],keyboard:["keydown","keyup","keypress"],devicemotion:["devicemotion"]};function f(e){return e&&"object"===o(e)}p=y,(d=[{key:"_associateSystemEventListener",value:function(e){for(var t in s)if(-1<s[t].indexOf(e)){c[t]&&0===a[t]&&c[t](),0===this._listenerCount[t]&&(l[t][this._targetID]=this),++this._listenerCount[t],++a[t];break}}},{key:"_dissociateSystemEventListener",value:function(e){for(var t in s)if(-1<s[t].indexOf(e)){this._listenerCount[t]<=0&&delete l[t][this._targetID],--a[t],u[t]&&0===a[t]&&u[t]();break}}},{key:"addEventListener",value:function(e,t,n){if(!t)return!1;if("function"!=typeof t&&!f(t))throw new TypeError("'listener' should be a function or an object.");var r=this._listeners,o=f(n),i=(o?Boolean(n.capture):Boolean(n))?1:2,o={listener:t,listenerType:i,passive:o&&Boolean(n.passive),once:o&&Boolean(n.once),next:null},a=r.get(e);if(void 0===a)r.set(e,o);else{for(var c=null;a;){if(a.listener===t&&a.listenerType===i)return!1;a=(c=a).next}c.next=o}return this._associateSystemEventListener(e),!0}},{key:"removeEventListener",value:function(e,t,n){if(t)for(var r=this._listeners,o=(f(n)?Boolean(n.capture):Boolean(n))?1:2,i=null,a=r.get(e);a;){if(a.listener===t&&a.listenerType===o)return i?i.next=a.next:a.next?r.set(e,a.next):r.delete(e),this._dissociateSystemEventListener(e),!0;a=(i=a).next}return!1}},{key:"dispatchEvent",value:function(e){if(!e||"string"!=typeof e.type)throw new TypeError('"event.type" should be a string.');var t=e.type,n=this["on"+t];if(n&&"function"==typeof n&&(e._target=e._currentTarget=this,n.call(this,e),e._target=e._currentTarget=null,e._eventPhase=0,e._passiveListener=null,e.defaultPrevented))return!1;var r=this._listeners,o=r.get(t);if(!o)return!0;e._target=e._currentTarget=this;for(var i=null;o&&(o.once?i?i.next=o.next:o.next?r.set(t,o.next):r.delete(t):i=o,e._passiveListener=o.passive?o.listener:null,"function"==typeof o.listener&&o.listener.call(this,e),!e._stopped);)o=o.next;return e._target=e._currentTarget=null,e._eventPhase=0,e._passiveListener=null,!e.defaultPrevented}}])&&r(p.prototype,d),h&&r(p,h),Object.defineProperty(p,"prototype",{writable:!1});var p,d=p;function y(){if(!(this instanceof y))throw new TypeError("Cannot call a class as a function");this._targetID=++i,this._listenerCount={touch:0,mouse:0,keyboard:0,devicemotion:0},this._listeners=new Map}var h;function m(e,t){var n,r=new TouchEvent(t),o=(Object.assign(r,e),r.changedTouches),i=r.touches,a=i.length,c=l.touch;for(n in c)if(c.hasOwnProperty(n)){for(var u=c[n],s=0;s<a;s++)i[s].target=u;o.forEach(function(e){e.target=u}),u.dispatchEvent(r)}}(h=loadRuntime()).onTouchStart(function(e){m(e,"touchstart")}),h.onTouchMove(function(e){m(e,"touchmove")}),h.onTouchEnd(function(e){m(e,"touchend")}),h.onTouchCancel(function(e){m(e,"touchcancel")}),t.exports=d},{}],9:[function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=o(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==o(e)?e:e+""))(r.key),r)}}function a(e,t,n){t=u(t);var r=e,t=c()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n);if(!t||"object"!=o(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=e("./EventTarget"),e=(()=>{function n(){var e=this,t=n;if(e instanceof t)return a(this,n,arguments);throw new TypeError("Cannot call a class as a function")}var e,t=n,r=l;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&s(t,r),t=n,(r=[{key:"construct",value:function(){this.result=null}},{key:"abort",value:function(){}},{key:"readAsArrayBuffer",value:function(e){e instanceof Blob?(this.result=e.arrayBuffer(),e=new Event("load"),this.dispatchEvent(e)):(e=new Event("error"),this.dispatchEvent(e))}},{key:"readAsDataURL",value:function(e){e instanceof Blob?(this.result="data:image/png;base64,"+window.btoa(e),e=new Event("load"),this.dispatchEvent(e)):(e=new Event("error"),this.dispatchEvent(e))}},{key:"readAsText",value:function(){}}])&&i(t.prototype,r),e&&i(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t})();t.exports=e},{"./EventTarget":8}],10:[function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=o(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==o(e)?e:e+""))(r.key),r)}}i=u,(c=[{key:"load",value:function(){}},{key:"status",get:function(){return this._status}},{key:"loaded",get:function(){return this._loaded}}])&&r(i.prototype,c),a&&r(i,a),Object.defineProperty(i,"prototype",{writable:!1});var i,a,c=i;function u(e,t,n){var r=this;if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");this.family=e,this.source=t,this.descriptors=n,this._status="unloaded",this._loaded=new Promise(function(e,t){r._resolveCB=e,r._rejectCB=t})}t.exports=c},{}],11:[function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=o(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==o(e)?e:e+""))(r.key),r)}}function a(e,t,n){t=u(t);var r=e,t=c()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n);if(!t||"object"!=o(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=e("./EventTarget"),f=e("./Event"),e=(()=>{function t(){var e;if(this instanceof t)return(e=a(this,t))._status="loading",e;throw new TypeError("Cannot call a class as a function")}var e,n=t,r=l;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&s(n,r),n=t,(r=[{key:"status",get:function(){return this._status}},{key:"onloading",set:function(e){this.addEventListener("loading",e)}},{key:"onloadingdone",set:function(e){this.addEventListener("loadingdone",e)}},{key:"onloadingerror",set:function(e){this.addEventListener("loadingerror",e)}},{key:"add",value:function(e){var t=this,n=(this._status=e._status="loading",this.dispatchEvent(new f("loading")),jsb.loadFont(e.family,e.source));setTimeout(function(){n?(e._status=t._status="loaded",e._resolveCB(),t.dispatchEvent(new f("loadingdone"))):(e._status=t._status="error",e._rejectCB(),t.dispatchEvent(new f("loadingerror")))},0)}},{key:"clear",value:function(){}},{key:"delete",value:function(){}},{key:"load",value:function(){}},{key:"ready",value:function(){}}])&&i(n.prototype,r),e&&i(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n})();t.exports=e},{"./Event":7,"./EventTarget":8}],12:[function(e,t,n){function c(e,t){if(t&&("object"==o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");t=e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=o(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==o(e)?e:e+""))(r.key),r)}}function f(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var p=e("./HTMLElement"),d=e("./DOMRect"),y=loadRuntime().createCanvas,e=(f(function e(t){l(this,e),this._width=t},[{key:"width",get:function(){return this._width}}]),(()=>{function a(e,t){l(this,a),n=this,o=["canvas"],r=s(r=a),(r=c(n,u()?Reflect.construct(r,o||[],s(n).constructor):r.apply(n,o))).id="glcanvas",r.type="canvas",r.top=0,r.left=0;var n,r,o,i=y();return i.__proto__.__proto__=a.prototype,Object.keys(r).forEach(function(e){i[e]=this[e]}.bind(r)),i.width=0<=e?Math.ceil(e):300,i.height=0<=t?Math.ceil(t):150,i._targetID=r._targetID,i._listenerCount=r._listenerCount,i._listeners=r._listeners,c(r,i)}var e=a,t=p;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t),f(a,[{key:"clientWidth",get:function(){return this.width}},{key:"clientHeight",get:function(){return this.height}},{key:"getBoundingClientRect",value:function(){return new d(0,0,this.width,this.height)}}])})());t.exports=e},{"./DOMRect":4,"./HTMLElement":13}],13:[function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=o(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==o(e)?e:e+""))(r.key),r)}}function a(e,t,n){t=u(t);var r=e,t=c()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n);if(!t||"object"!=o(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=e("./Element"),e=(e("./util").noop,(()=>{function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=this,n=r;if(t instanceof n)return(t=a(this,r)).tagName=e.toUpperCase(),t.className="",t.children=[],t.innerHTML="",t.parentElement=window.__canvas,t.ontouchstart=null,t.ontouchmove=null,t.ontouchend=null,t.ontouchcancel=null,t;throw new TypeError("Cannot call a class as a function")}var e,t=r,n=l;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&s(t,n),t=r,(n=[{key:"focus",value:function(){}}])&&i(t.prototype,n),e&&i(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t})());t.exports=e},{"./Element":6,"./util":29}],14:[function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=o(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==o(e)?e:e+""))(r.key),r)}}function c(e,t){if(t&&("object"==o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");t=e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=e("./HTMLElement"),f=e("./Event"),p=loadRuntime().createImage,e=p(),e=Object.getOwnPropertyDescriptor(e.__proto__,"src"),d=e.set,y=e.get,e=(()=>{function a(e,t,n){var r,o;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");if(!n)throw new TypeError("Illegal constructor, use 'new Image(w, h); instead!'");n=this,o=["img"],r=s(r=a),(r=c(n,u()?Reflect.construct(r,o||[],s(n).constructor):r.apply(n,o))).complete=!1,r.crossOrigin=null,r.naturalWidth=0,r.naturalHeight=0;var i=p();return Object.keys(r).forEach(function(e){i[e]=this[e]}.bind(r)),i._onload=function(){this.complete=!0,this.naturalWidth=this.width,this.naturalHeight=this.height,this.dispatchEvent(new f("load"))}.bind(i),i._onerror=function(){this.dispatchEvent(new f("error"))}.bind(i),Object.defineProperty(i,"src",{configurable:!0,enumerable:!0,get:function(){return y.call(this)},set:function(e){return this.complete=!1,e.startsWith("file://")&&(e=e.substr("file://".length)),d.call(this,e)}}),c(r,i)}var e,t=a,n=l;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&i(t,n),t=a,(n=[{key:"clientWidth",get:function(){return this.width}},{key:"clientHeight",get:function(){return this.height}},{key:"getBoundingClientRect",value:function(){return new DOMRect(0,0,this.width,this.height)}}])&&r(t.prototype,n),e&&r(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t})();t.exports=e},{"./Event":7,"./HTMLElement":13}],15:[function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=o(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==o(e)?e:e+""))(r.key),r)}}function a(e,t,n){t=u(t);var r=e,t=c()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n);if(!t||"object"!=o(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=e("./HTMLElement"),f=e("./MediaError"),e=(()=>{function t(e){if(this instanceof t)return(e=a(this,t,[e]))._volume=1,e._duration=0,e._isEnded=!1,e._isMute=!1,e._readyState=0,e._error=new f,e;throw new TypeError("Cannot call a class as a function")}var e,n=t,r=l;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&s(n,r),n=t,(r=[{key:"addTextTrack",value:function(){}},{key:"captureStream",value:function(){}},{key:"fastSeek",value:function(){}},{key:"load",value:function(){}},{key:"pause",value:function(){}},{key:"play",value:function(){}},{key:"canPlayType",value:function(e){return""}},{key:"volume",get:function(){return this._volume},set:function(e){this._volume=e}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return this._isEnded}},{key:"muted",get:function(){return this._isMute}},{key:"readyState",get:function(){return this._readyState}},{key:"error",get:function(){return this._error}},{key:"currentTime",get:function(){return 0}}])&&i(n.prototype,r),e&&i(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n})();t.exports=e},{"./HTMLElement":13,"./MediaError":20}],16:[function(o,e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=i(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==i(e)?e:e+""))(r.key),r)}}function c(e,t,n){t=s(t);var r=e,t=u()?Reflect.construct(t,n||[],s(e).constructor):t.apply(e,n);if(!t||"object"!=i(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var f=o("./HTMLElement"),p=o("./Event"),n=(()=>{function n(e,t){if(this instanceof n)return c(this,n,["script"]);throw new TypeError("Cannot call a class as a function")}var e,t=n,r=f;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&l(t,r),t=n,(r=[{key:"src",set:function(e){var t=this;setTimeout(function(){o(e),t.dispatchEvent(new p("load"))},0)}}])&&a(t.prototype,r),e&&a(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t})();e.exports=n},{"./Event":7,"./HTMLElement":13}],17:[function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=o(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==o(e)?e:e+""))(r.key),r)}}function a(e,t,n){t=u(t);var r=e,t=c()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n);if(!t||"object"!=o(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=e("./HTMLMediaElement"),e=(()=>{function e(){if(this instanceof e)return a(this,e,["video"]);throw new TypeError("Cannot call a class as a function")}var t,n=e,r=l;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&s(n,r),n=e,(r=[{key:"canPlayType",value:function(e){return"video/mp4"===e}}])&&i(n.prototype,r),t&&i(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n})();t.exports=e},{"./HTMLMediaElement":15}],18:[function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=o(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==o(e)?e:e+""))(r.key),r)}}function a(e,t,n){t=u(t);var r=e,t=c()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n);if(!t||"object"!=o(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=e("./HTMLImageElement"),e=window.Image,r=(()=>{function n(e,t){if(this instanceof n)return a(this,n,[e,t,!0]);throw new TypeError("Cannot call a class as a function")}var e,t,r=n,o=l;if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(o&&o.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),o&&s(r,o),r=n,e&&i(r.prototype,e),t&&i(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r})();e.prototype.__proto__=r.prototype,t.exports=r},{"./HTMLImageElement":14}],19:[function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=i(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==i(e)?e:e+""))(r.key),r)}}function a(e,t,n){t=c(t);var r=e,t=o()?Reflect.construct(t,n||[],c(e).constructor):t.apply(e,n);if(!t||"object"!=i(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function o(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(o=function(){return!!e})()}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var s=e("./Event"),l={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"("},f=!1,e=(()=>{function o(e,t){var n;if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");n=a(this,o,[e]),"object"===i(t)?(n._altKeyActive=t.altKey||!1,n._ctrlKeyActive=t.ctrlKey||!1,n._metaKeyActive=t.metaKey||!1,n._shiftKeyActive=t.shiftKey||!1,n._keyCode=t.keyCode||-1,n._repeat=t.repeat||!1):(n._altKeyActive=!1,n._ctrlKeyActive=!1,n._metaKeyActive=!1,n._shiftKeyActive=!1,n._keyCode=-1,n._repeat=!1);var r,t=n._keyCode;return 48<=t&&t<=57?(n._code="Digit"+(r=t-48),n._key=n._shiftKeyActive?l[t]:""+r):10048<=t&&t<=10057?(r=(t=n._keyCode=t-1e4)-48,n._code="Numpad"+r,n._key=""+r):65<=t&&t<=90?(r=String.fromCharCode(t),n._code="Key"+r,n._key=n._shiftKeyActive||f?r:r.toLowerCase()):112<=t&&t<=123?n._code=n._key="F"+(t-111):27===t?n._code=n._key="Escape":189===t?(n._code="Minus",n._key=n._shiftKeyActive?"_":"-"):187===t?(n._code="Equal",n._key=n._shiftKeyActive?"+":"="):220===t?(n._code="Backslash",n._key=n._shiftKeyActive?"|":"\\"):192===t?(n._code="Backquote",n._key=n._shiftKeyActive?"~":"`"):8===t?n._code=n._key="Backspace":13===t?n._code=n._key="Enter":219===t?(n._code="BracketLeft",n._key=n._shiftKeyActive?"{":"["):221===t?(n._code="BracketRight",n._key=n._shiftKeyActive?"}":"]"):186===t?(n._code="Semicolon",n._key=n._shiftKeyActive?":":";"):222===t?(n._code="Quote",n._key=n._shiftKeyActive?'"':"'"):9===t?n._code=n._key="Tab":17===t?(n._code="ControlLeft",n._key="Control"):20017===t?(n._keyCode=17,n._code="ControlRight",n._key="Control"):16===t?(n._code="ShiftLeft",n._key="Shift"):20016===t?(n._keyCode=16,n._code="ShiftRight",n._key="Shift"):18===t?(n._code="AltLeft",n._key="Alt"):20018===t?(n._keyCode=18,n._code="AltRight",n._key="Alt"):91===t?(n._code="MetaLeft",n._key="Meta"):93===t?(n._code="MetaRight",n._key="Meta"):37===t?n._code=n._key="ArrowLeft":38===t?n._code=n._key="ArrowUp":39===t?n._code=n._key="ArrowRight":40===t?n._code=n._key="ArrowDown":20093===t?(n._keyCode=93,n._code=n._key="ContextMenu"):20013===t?(n._keyCode=13,n._code="NumpadEnter",n._key="Enter"):107===t?(n._code="NumpadAdd",n._key="+"):109===t?(n._code="NumpadSubtract",n._key="-"):106===t?(n._code="NumpadMultiply",n._key="*"):111===t?(n._code="NumpadDivide",n._key="/"):12===t?(n._code="NumLock",n._key="Clear"):124===t?n._code=n._key="F13":36===t?n._code=n._key="Home":33===t?n._code=n._key="PageUp":34===t?n._code=n._key="PageDown":35===t?n._code=n._key="End":188===t?(n._code="Comma",n._key=n._shiftKeyActive?"<":","):190===t?(n._code="Period",n._key=n._shiftKeyActive?">":"."):191===t?(n._code="Slash",n._key=n._shiftKeyActive?"?":"/"):32===t?(n._code="Space",n._key=" "):46===t?n._code=n._key="Delete":110===t?(n._code="NumpadDecimal",n._key="."):20===t?(n._code=n._key="CapsLock","keyup"===e&&(f=!f)):console.log("Unknown keyCode: "+n._keyCode),n}var e,t=o,n=s;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&u(t,n),t=o,(n=[{key:"getModifierState",value:function(){return!1}},{key:"altKey",get:function(){return this._altKeyActive}},{key:"code",get:function(){return this._code}},{key:"ctrlKey",get:function(){return this._ctrlKeyActive}},{key:"isComposing",get:function(){return!1}},{key:"key",get:function(){return this._key}},{key:"keyCode",get:function(){return this._keyCode}},{key:"location",get:function(){return 0}},{key:"metaKey",get:function(){return this._metaKeyActive}},{key:"repeat",get:function(){return this._repeat}},{key:"shiftKey",get:function(){return this._shiftKeyActive}}])&&r(t.prototype,n),e&&r(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t})();t.exports=e},{"./Event":7}],20:[function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=o(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==o(e)?e:e+""))(r.key),r)}}i=u,(c=[{key:"code",get:function(){return 1}},{key:"message",get:function(){return""}}])&&r(i.prototype,c),a&&r(i,a),Object.defineProperty(i,"prototype",{writable:!1});var i,a,c=i;function u(){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function")}t.exports=c},{}],21:[function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=o(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==o(e)?e:e+""))(r.key),r)}}function a(e,t,n){t=u(t);var r=e,t=c()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n);if(!t||"object"!=o(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=e("./Event"),e=(()=>{function n(e,t){if(this instanceof n)return(e=a(this,n,[e]))._button=t.button,e._which=t.which,e._wheelDelta=t.wheelDelta,e._clientX=t.clientX,e._clientY=t.clientY,e._screenX=t.screenX,e._screenY=t.screenY,e._pageX=t.pageX,e._pageY=t.pageY,e;throw new TypeError("Cannot call a class as a function")}var e,t=n,r=l;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&s(t,r),t=n,(r=[{key:"button",get:function(){return this._button}},{key:"which",get:function(){return this._which}},{key:"wheelDelta",get:function(){return this._wheelDelta}},{key:"clientX",get:function(){return this._clientX}},{key:"clientY",get:function(){return this._clientY}},{key:"screenX",get:function(){return this._screenX}},{key:"screenY",get:function(){return this._screenY}},{key:"pageX",get:function(){return this._pageX}},{key:"pageY",get:function(){return this._pageY}}])&&i(t.prototype,r),e&&i(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t})();t.exports=e},{"./Event":7}],22:[function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=o(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==o(e)?e:e+""))(r.key),r)}}function a(e,t,n){t=u(t);var r=e,t=c()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n);if(!t||"object"!=o(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=e("./EventTarget"),e=(()=>{function t(){var e;if(this instanceof t)return(e=a(this,t)).childNodes=[],e.parentNode=window.__canvas,e;throw new TypeError("Cannot call a class as a function")}var e,n=t,r=l;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&s(n,r),n=t,(r=[{key:"appendChild",value:function(e){if(!(e instanceof t))throw new TypeError("Failed to executed 'appendChild' on 'Node': parameter 1 is not of type 'Node'.");this.childNodes.push(e)}},{key:"insertBefore",value:function(e,t){return e}},{key:"replaceChild",value:function(e,t){return t}},{key:"cloneNode",value:function(){var e=Object.create(this);return Object.assign(e,this),e}},{key:"removeChild",value:function(t){var e=this.childNodes.findIndex(function(e){return e===t});return-1<e?this.childNodes.splice(e,1):null}},{key:"contains",value:function(e){return-1<this.childNodes.indexOf(e)}}])&&i(n.prototype,r),e&&i(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n})();t.exports=e},{"./EventTarget":8}],23:[function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=o(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==o(e)?e:e+""))(r.key),r)}}function a(e,t,n){t=u(t);var r=e,t=c()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n);if(!t||"object"!=o(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=e("./Event"),e=(()=>{function n(e,t){if(this instanceof n)return(e=a(this,n,[e])).touches=[],e.targetTouches=[],e.changedTouches=[],e;throw new TypeError("Cannot call a class as a function")}var e,t,r=n,o=l;if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(o&&o.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),o&&s(r,o),r=n,e&&i(r.prototype,e),t&&i(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r})();t.exports=e},{"./Event":7}],24:[function(e,t,n){var r,o;window.WebSocket&&(r=WebSocket.prototype.send,WebSocket.prototype.binaryType="blob",WebSocket.prototype.send=function(e){return e instanceof Blob&&(e=e.arrayBuffer()),r.call(this,e)},o=Object.getOwnPropertyDescriptor(WebSocket.prototype,"onmessage"),Object.defineProperty(WebSocket.prototype,"onmessage",{get:function(){return function(e){var t=o.get.call(this);"function"==typeof t&&(e.data instanceof ArrayBuffer&&"blob"===this.binaryType&&(e.data=new Blob([e.data])),t.call(this,e))}.bind(this)},set:function(e){o.set.call(this,e)}}))},{}],25:[function(e,t,n){var r,o,i,a=loadRuntime(),c=new WeakMap;a.getFeature("network.xml_http_request")&&(XMLHttpRequest.prototype.addEventListener=function(e,t,n){this["on"+e]=t},XMLHttpRequest.prototype.removeEventListener=function(e,t,n){this["on"+e]=null},r=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(){var e=r.call.apply(r,[this].concat(Array.prototype.slice.call(arguments)));return c.set(this,{headers:{}}),e},o=XMLHttpRequest.prototype.setRequestHeader,XMLHttpRequest.prototype.setRequestHeader=function(e,t){var n,r=c.get(this);return r&&(n=r.headers[e],r.headers[e]=n?n+","+t:t),o.call.apply(o,[this].concat(Array.prototype.slice.call(arguments)))},i=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.send=function(){var e=c.get(this);if(e){var t,n=!0;for(t in e.headers)if("content-type"===t.toLocaleLowerCase()){n=!1;break}n&&this.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}return i.call.apply(i,[this].concat(Array.prototype.slice.call(arguments)))})},{}],26:[function(o,e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=i(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==i(e)?e:e+""))(r.key),r)}}function c(e,t,n){t=s(t);var r=e,t=u()?Reflect.construct(t,n||[],s(e).constructor):t.apply(e,n);if(!t||"object"!=i(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var f=o("./HTMLElement"),p=o("./Image"),d=o("./HTMLCanvasElement"),y=o("./HTMLVideoElement"),h=o("./HTMLScriptElement"),m=o("./Node"),b=o("./FontFaceSet"),v=new((()=>{function t(){var e;if(this instanceof t)return(e=c(this,t)).readyState="complete",e.visibilityState="visible",e.documentElement=window,e.hidden=!1,e.location=o("./location"),e.head=new f("head"),e.body=new f("body"),e.fonts=new b,e.scripts=[],e;throw new TypeError("Cannot call a class as a function")}var e,n=t,r=m;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&l(n,r),n=t,(r=[{key:"createElementNS",value:function(e,t,n){return this.createElement(t)}},{key:"createElement",value:function(e){return"canvas"===e?new d:"img"===e?new p:"video"===e?new y:"script"===e?new h:new f(e)}},{key:"getElementById",value:function(e){return e===window.__canvas.id||"canvas"===e?window.__canvas:new f(e)}},{key:"getElementsByTagName",value:function(e){return"head"===e?[v.head]:"body"===e?[v.body]:"canvas"===e?[window.__canvas]:[new f(e)]}},{key:"getElementsByName",value:function(e){return"head"===e?[v.head]:"body"===e?[v.body]:"canvas"===e?[window.__canvas]:[new f(e)]}},{key:"querySelector",value:function(e){return"head"===e?v.head:"body"===e?v.body:"canvas"===e||e==="#".concat(window.__canvas.id)?window.__canvas:new f(e)}},{key:"querySelectorAll",value:function(e){return"head"===e?[v.head]:"body"===e?[v.body]:"canvas"===e?[window.__canvas]:[new f(e)]}},{key:"createTextNode",value:function(){return new f("text")}},{key:"elementFromPoint",value:function(){return window.canvas}},{key:"createEvent",value:function(e){return window[e]?new window[e]:null}}])&&a(n.prototype,r),e&&a(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n})());e.exports=v},{"./FontFaceSet":11,"./HTMLCanvasElement":12,"./HTMLElement":13,"./HTMLScriptElement":16,"./HTMLVideoElement":17,"./Image":18,"./Node":22,"./location":27}],27:[function(e,t,n){t.exports={href:"game.js",pathname:"game.js",search:"",hash:"",reload:function(){}}},{}],28:[function(e,t,n){var e=e("./util").noop,r={platform:"",language:"",appVersion:"5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Mobile/14E8301 NetType/WIFI Language/zh_CN",onLine:!0,geolocation:{getCurrentPosition:e,watchPosition:e,clearWatch:e},maxTouchPoints:10};t.exports={init:function(e){return r.language=e.language,r.platform=e.platform,r}}},{"./util":29}],29:[function(e,t,n){t.exports=function(){}},{}],30:[function(i,e,t){function a(e,t){window.innerWidth=e,window.innerHeight=t,window.outerWidth=window.innerWidth,window.outerHeight=window.innerHeight}function n(){function t(e){var t=0;switch(e){case"landscape":t=90;break;case"portraitReverse":t=180;break;case"landscapeReverse":t=-90}return t}var e=loadRuntime(),n=i("../base64/base64.min.js"),r=n.btoa,n=n.atob,r=(window.btoa=r,window.atob=n,i("../Blob.js")),n=r.Blob,r=r.URL,o=(window.Blob=n,window.URL=r,window.DOMParser=i("../xmldom/dom-parser.js").DOMParser,window.alert=console.error.bind(console),window.optConfig={},window.optConfig.disableBatchGLCommandsToNative=function(){console.warn("window.optConfig.disableBatchGLCommandsToNative is not support!")},window.optConfig.enableGLParameterCheck=function(){console.warn("window.optConfig.enableGLParameterCheck is not support!")},(window.top=window.parent=window).ontouchstart=null,window.ontouchmove=null,window.ontouchend=null,window.ontouchcancel=null,window.pageXOffset=window.pageYOffset=window.clientTop=window.clientLeft=0,e.onWindowResize(function(e){a(e.windowWidth,e.windowHeight),window.resize&&window.resize(e.windowWidth,e.windowHeight)}),e.getSystemInfoSync()),n=(a(o.windowWidth,o.windowHeight),window.location=i("./location"),window.document=i("./document"),window.Element=i("./Element"),window.HTMLElement=i("./HTMLElement"),window.HTMLCanvasElement=i("./HTMLCanvasElement"),window.HTMLImageElement=i("./HTMLImageElement"),window.HTMLMediaElement=i("./HTMLMediaElement"),window.HTMLVideoElement=i("./HTMLVideoElement"),window.HTMLScriptElement=i("./HTMLScriptElement"),window.__canvas=new HTMLCanvasElement,window.__canvas.width=o.windowWidth||o.screenWidth,window.__canvas.height=o.windowHeight||o.screenHeight,window.navigator=i("./navigator").init(o),window.Image=i("./Image"),window.FileReader=i("./FileReader"),window.FontFace=i("./FontFace"),window.FontFaceSet=i("./FontFaceSet"),window.EventTarget=i("./EventTarget"),window.Event=i("./Event"),window.TouchEvent=i("./TouchEvent"),window.MouseEvent=i("./MouseEvent"),window.KeyboardEvent=i("./KeyboardEvent"),window.DeviceMotionEvent=i("./DeviceMotionEvent"),e.getDeviceOrientationSync()),r=t(n);window.orientation=r,e.onDeviceOrientationChange(function(e){window.orientation=t(e.value)}),window.devicePixelRatio=1,window.screen={availTop:0,availLeft:0,availHeight:window.innerWidth,availWidth:window.innerHeight,colorDepth:8,pixelDepth:8,left:0,top:0,width:window.innerWidth,height:window.innerHeight,orientation:{type:"portrait-primary"},onorientationchange:function(e){}},window.addEventListener=function(e,t,n){window.__canvas.addEventListener(e,t,n)},window.removeEventListener=function(e,t,n){window.__canvas.removeEventListener(e,t,n)},window.dispatchEvent=function(e){window.__canvas.dispatchEvent(e)},window.getComputedStyle=function(e){return{position:"absolute",left:"0px",top:"0px",height:"0px"}},window.resize=function(e,t){window.innerWidth=e,window.innerHeight=t,window.outerWidth=window.innerWidth,window.outerHeight=window.innerHeight,window.__canvas._width=window.innerWidth,window.__canvas._height=window.innerHeight,window.screen.availWidth=window.innerWidth,window.screen.availHeight=window.innerHeight,window.screen.width=window.innerWidth,window.screen.height=window.innerHeight},window.focus=function(){},window.scroll=function(){},window._isInjected=!0,window.__getOS=function(){var e=o.platform;return"android"===e?e="Android":"ios"===e&&(e="iOS"),e},window.__getCurrentLanguage=function(){return o.language},window.__getOSVersion=function(){return o.system},window.__getPlatform=function(){console.warn("window.__getPlatform() is deprecated!");var e=o.platform.toLowerCase(),t=o.model.toLowerCase();if("android"===e)return 3;if("ios"===e){if(-1!==t.indexOf("iphone"))return 4;if(-1!==t.indexOf("ipad"))return 5}return-1},window.__getVersion=function(){console.warn("window.__getVersion() deprecated!")},window.__cleanScript=function(){console.warn("window.__cleanScript() deprecated!")},window.__isObjectValid=function(){console.warn("window.__isObjectValid() deprecated!")},window.__restartVM=function(){console.warn("window.__restartVM() is deprecated!")},window.close=function(){console.warn("window.close() is deprecated!")}}window._isInjected||n()},{"../Blob.js":2,"../base64/base64.min.js":3,"../xmldom/dom-parser.js":34,"./DeviceMotionEvent":5,"./Element":6,"./Event":7,"./EventTarget":8,"./FileReader":9,"./FontFace":10,"./FontFaceSet":11,"./HTMLCanvasElement":12,"./HTMLElement":13,"./HTMLImageElement":14,"./HTMLMediaElement":15,"./HTMLScriptElement":16,"./HTMLVideoElement":17,"./Image":18,"./KeyboardEvent":19,"./MouseEvent":21,"./TouchEvent":23,"./document":26,"./location":27,"./navigator":28}],31:[function(e,t,n){e("./jsb_prepare.js"),e("./h5-adapter/window.js"),e("./h5-adapter/WebSocket.js"),e("./h5-adapter/XMLHttpRequest.js"),e("./rt_compatibility.js")},{"./h5-adapter/WebSocket.js":24,"./h5-adapter/XMLHttpRequest.js":25,"./h5-adapter/window.js":30,"./jsb_prepare.js":32,"./rt_compatibility.js":33}],32:[function(e,t,n){function r(e){var t=s(e);p.forEach(function(e){e(t)})}function o(e){e=e,u[0]=c*u[0]+(1-c)*e.x,u[1]=c*u[1]+(1-c)*e.y,u[2]=c*u[2]+(1-c)*e.z,window.dispatchEvent(new i({acceleration:{x:e.x-u[0],y:e.y-u[1],z:e.z-u[2]},accelerationIncludingGravity:{x:e.x,y:e.y,z:e.z}}))}var i=e("./h5-adapter/DeviceMotionEvent"),a=loadRuntime(),e=a.getSystemInfoSync(),c=.8,u=[0,0,0],s="android"===e.platform.toLowerCase()||"harmonyos"==e.platform.toLowerCase()?function(e){return e.x*=-10,e.y*=-10,e.z*=-10,e}:function(e){return e.x*=10,e.y*=10,e.z*=10,e},l=a.startAccelerometer,f=(a.startAccelerometer=function(e){l(Object.assign({type:"acceleration"},e))},a.onAccelerometerChange.bind(a)),p=[],d=(a.onAccelerometerChange=function(e){if("function"==typeof e){for(var t=0;t<p.length;++t)if(p[t]===e)return;p.push(e),1===p.length&&f(r)}else console.error("onAccelerometerChange should accept a function instead of "+type)},a.offAccelerometerChange.bind(a)),y=(a.offAccelerometerChange=function(e){if("function"==typeof e){for(var t=0;t<p.length;t++)if(p[t]===e){p.splice(t,1),0===p.length&&d(r);break}}else console.error("offAccelerometerChange should accept a function instead of "+type)},window.jsb={dumpNativePtrToSeObjectMap:function(){console.warn("jsb.dumpNativePtrToSeObjectMap  is deprecated")},saveImageData:window.saveImageData,device:{setMotionEnabled:function(e){e?(l({type:"accelerationIncludingGravity"}),a.onAccelerometerChange(o)):(a.stopAccelerometer({}),a.offAccelerometerChange(o))}}},jsb.__obj_ref_id=0,jsb.registerNativeRef=function(e,t){var n;e&&t&&e!==t&&(void 0===(n=t.__jsb_ref_id)&&(n=t.__jsb_ref_id=jsb.__obj_ref_id++),(e.__nativeRefs||(e.__nativeRefs={}))[n]=t)},jsb.unregisterNativeRef=function(e,t){e&&t&&e!==t&&void 0!==(t=t.__jsb_ref_id)&&(e=e.__nativeRefs)&&delete e[t]},jsb.unregisterAllNativeRefs=function(e){e&&delete e.__nativeRefs},jsb.unregisterChildRefsForNode=function(e,t){t=!!t;for(var n,r=e.getChildren(),o=0,i=r.length;o<i;++o)n=r[o],jsb.unregisterNativeRef(e,n),t&&jsb.unregisterChildRefsForNode(n,t)},a.loadFont?jsb.loadFont=a.loadFont:jsb.loadFont=function(){console.warn("jsb.loadFont() is not support!")},jsb.openDebugView=function(){console.warn("jsb.openDebugView() is not support!")},jsb.setDebugViewText=function(){console.warn("jsb.setDebugViewText() is not support!")},a.getFeature),h=(a.getFeature=function(e){var t=y(e="webgl.extensions.oes_vertex_array_object.revision"===e?"canvas.webgl.extensions.oes_vertex_array_object.revision":e);return"canvas.context2d.premultiply_image_data"===e?0<t:t},a.setFeature);a.setFeature=function(e,t){return h(e="webgl.extensions.oes_vertex_array_object.revision"===e?"canvas.webgl.extensions.oes_vertex_array_object.revision":e,t="boolean"==typeof t?t?1:0:t)}},{"./h5-adapter/DeviceMotionEvent":5}],33:[function(e,t,n){function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("./AudioEngine.js");function r(e,t,n,r){void 0!==e&&(void 0!==t?"function"==typeof e.fail&&e.fail.apply(e,t):"function"==typeof e.success&&e.success.apply(e,n),"function"==typeof e.complete)&&e.complete.apply(e,r)}var b=loadRuntime(),e=b.getFileSystemManager().__proto__,i=e.stat,o=(b.getUserInfo=function(n){b.authorize({scope:"scope.userInfo",success:function(){console.log("authorize user info success"),b.callCustomCommand({success:function(e){try{var t=JSON.parse(e);r(n,void 0,[t])}catch(e){r(n,["user info parse error"])}},fail:function(e){r(n,["call 'getUserInfo' custom command fail"])},undefined:void 0},"getUserInfo")},fail:function(){r(n,["without user info permission"])}})},b.saveImageToPhotosAlbum=function(t){b.authorize({scope:"scope.writePhotosAlbum",success:function(){console.log("authorize writePhotosAlbum success");var e="";"object"===m(t)?"string"==typeof t.filePath&&(e=t.filePath):t={},b.callCustomCommand({success:t.success,fail:t.fail,complete:t.complete},"rt-media-image-save-image-to-photos-album",e)},fail:function(){var e="without writePhotosAlbum permission";"function"==typeof t.fail&&t.fail([e]),"function"==typeof t.complete&&t.complete([e])}})},b.saveImageTempSync=function(e){return window.saveImageTempSync(e)},b.saveImageTemp=function(e){window.saveImageTemp(e)},b.previewImage=function(e){var t="",n=[];if("object"===m(e)){"string"==typeof e.current&&(t=e.current);var r=e.urls;if(Array.isArray(r))for(var o=r.length,i=0;i<o;++i)"string"==typeof r[i]&&n.push(r[i])}else e={};b.callCustomCommand({success:e.success,fail:e.fail,complete:e.complete},"rt-media-image-preview-image",t,n)},b.chooseImage=function(i){var e,t=9,n=["original","compressed"],r=!1,o=!1;if("object"===m(i)){if("number"==typeof i.count&&(t=i.count),Array.isArray(i.sizeType)){for(var a=i.sizeType,c=a.length,u=!1,s=!1,l=0;l<c;++l)"original"===a[l]?u=!0:"compressed"===a[l]&&(s=!0);n=u?s?["original","compressed"]:["original"]:s?["compressed"]:["original","compressed"]}if(Array.isArray(i.sourceType)){for(var f=i.sourceType,p=f.length,d=0;d<p;++d)"album"===f[d]?r=!0:"camera"===f[d]&&(o=!0);r?e=o?["album","camera"]:["album"]:o?e=["camera"]:(e=["album","camera"],o=r=!0)}}else i={},e=["album","camera"],o=r=!0;function y(){b.callCustomCommand({success:function(e){for(var t=[],n=[],r=e.length,o=0;o<r;o+=2)t[o/2]=e[o],n[o/2]={path:e[o],size:parseInt(e[o+1])};"function"==typeof i.success&&i.success({tempFilePaths:t.slice(),tempFiles:n.slice()}),"function"==typeof i.complete&&i.complete({tempFilePaths:t,tempFiles:n})},fail:function(e){"function"==typeof i.fail&&i.fail(e),"function"==typeof i.complete&&i.complete(e)}},"rt-media-image-choose-image",t,n,e)}function h(e){"function"==typeof i.fail&&i.fail([e]),"function"==typeof i.complete&&i.complete([e])}o&&r?b.authorize({scope:"scope.camera",success:function(){console.log("authorize camera success"),b.authorize({scope:"scope.writePhotosAlbum",success:function(){console.log("authorize writePhotosAlbum success"),y()},fail:function(){h("without writePhotosAlbum permission")}})},fail:function(){h("without camera permission")}}):o?b.authorize({scope:"scope.camera",success:function(){console.log("authorize camera success"),y()},fail:function(){h("without camera permission")}}):b.authorize({scope:"scope.writePhotosAlbum",success:function(){console.log("authorize writePhotosAlbum success"),y()},fail:function(){h("without writePhotosAlbum permission")}})},b.openSetting=function(t){"object"!==m(t)&&(t={}),b.callCustomCommand({success:function(e){"function"==typeof t.success&&t.success(JSON.parse(e)),"function"==typeof t.complete&&t.complete(JSON.parse(e))},fail:function(e){"function"==typeof t.fail&&t.fail(e),"function"==typeof t.complete&&t.complete(e)}},"rt-open-setting")},b.getSetting=function(t){"object"!==m(t)&&(t={}),b.callCustomCommand({success:function(e){"function"==typeof t.success&&t.success(JSON.parse(e)),"function"==typeof t.complete&&t.complete(JSON.parse(e))},fail:function(e){"function"==typeof t.fail&&t.fail(e),"function"==typeof t.complete&&t.complete(e)}},"rt-get-setting")},e.stat=function(e){if("object"!==m(e))return i.apply(this,arguments);if("function"!=typeof e.success)return i.apply(this,arguments);for(var t=Object.assign({},e),n=e.success,r=(t.success=function(e){"object"===m(e)&&(e.stat=e.stats),n.call(null,e)},[t]),o=1;o<arguments.length;o++)r[o]=arguments[o];return i.apply(this,r)},e.readFileSync),e=(e.readFileSync=function(e){if("string"==typeof e&&!e.startsWith(b.env.USER_DATA_PATH)&&!e.startsWith(b.env.TEMP_DATA_PATH)&&!e.startsWith("/"))try{this.accessSync(e)}catch(e){return}return o.apply(this,arguments)},"canvas.context2d.textbaseline.default");(b._compatibleMode=1)==b.getFeature("canvas.context2d.textbaseline.alphabetic")&&1==b.getFeature(e)&&b.setFeature(e,0)},{"./AudioEngine.js":1}],34:[function(e,t,n){function r(e){this.options=e||{locator:{}}}function s(){this.cdata=!1}function l(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function f(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function o(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function p(e,t){(e.currentElement||e.doc).appendChild(t)}r.prototype.parseFromString=function(e,t){var n=this.options,r=new y,o=n.domBuilder||new s,i=n.errorHandler,a=n.locator,c=n.xmlns||{},t=/\/x?html?$/.test(t),u=t?d.entityMap:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return a&&o.setDocumentLocator(a),r.errorHandler=((r,e,o)=>{if(!r){if(e instanceof s)return e;r=e}var i={},a=r instanceof Function;function t(t){var n=r[t];!n&&a&&(n=2==r.length?function(e){r(t,e)}:r),i[t]=n?function(e){n("[xmldom "+t+"]\t"+e+f(o))}:function(){}}return o=o||{},t("warning"),t("error"),t("fatalError"),i})(i,o,a),r.domBuilder=n.domBuilder||o,t&&(c[""]="http://www.w3.org/1999/xhtml"),c.xml=c.xml||"http://www.w3.org/XML/1998/namespace",e?r.parse(e,c,u):r.errorHandler.error("invalid doc source"),o.doc},s.prototype={startDocument:function(){this.doc=(new i).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,r){var o=this.doc,i=o.createElementNS(e,n||t),a=r.length;p(this,i),this.currentElement=i,this.locator&&l(this.locator,i);for(var c=0;c<a;c++){var e=r.getURI(c),u=r.getValue(c),n=r.getQName(c),s=o.createAttributeNS(e,n);this.locator&&l(r.getLocator(c),s),s.value=s.nodeValue=u,i.setAttributeNode(s)}},endElement:function(e,t,n){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){e=this.doc.createProcessingInstruction(e,t);this.locator&&l(this.locator,e),p(this,e)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){var r;(e=o.apply(this,arguments))&&(r=this.cdata?this.doc.createCDATASection(e):this.doc.createTextNode(e),this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(e)&&this.doc.appendChild(r),this.locator)&&l(this.locator,r)},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=o.apply(this,arguments);e=this.doc.createComment(e);this.locator&&l(this.locator,e),p(this,e)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var r=this.doc.implementation;r&&r.createDocumentType&&(r=r.createDocumentType(e,t,n),this.locator&&l(this.locator,r),p(this,r))},warning:function(e){console.warn("[xmldom warning]\t"+e,f(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,f(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,f(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){s.prototype[e]=function(){return null}});var d=e("./entities"),y=e("./sax").XMLReader,i=n.DOMImplementation=e("./dom").DOMImplementation;n.XMLSerializer=e("./dom").XMLSerializer,n.DOMParser=r},{"./dom":35,"./entities":36,"./sax":37}],35:[function(L,M,e){function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n in e)t[n]=e[n]}function t(e,t){var n,r=e.prototype;r instanceof t||((n=function(){}).prototype=t.prototype,o(r,n=new n),e.prototype=r=n),r.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),r.constructor=e)}var n,r={},i=(r.ELEMENT_NODE=1,r.ATTRIBUTE_NODE=2,r.TEXT_NODE=3,r.CDATA_SECTION_NODE=4,r.ENTITY_REFERENCE_NODE=5,r.ENTITY_NODE=6,r.PROCESSING_INSTRUCTION_NODE=7,r.COMMENT_NODE=8,r.DOCUMENT_NODE=9,r.DOCUMENT_TYPE_NODE=10,r.DOCUMENT_FRAGMENT_NODE=11,r.NOTATION_NODE=12,{}),a={};i.INDEX_SIZE_ERR=(a[1]="Index size error",1),i.DOMSTRING_SIZE_ERR=(a[2]="DOMString size error",2),i.HIERARCHY_REQUEST_ERR=(a[3]="Hierarchy request error",3),i.WRONG_DOCUMENT_ERR=(a[4]="Wrong document",4),i.INVALID_CHARACTER_ERR=(a[5]="Invalid character",5),i.NO_DATA_ALLOWED_ERR=(a[6]="No data allowed",6),i.NO_MODIFICATION_ALLOWED_ERR=(a[7]="No modification allowed",7),i.NOT_FOUND_ERR=(a[8]="Not found",8),i.NOT_SUPPORTED_ERR=(a[9]="Not supported",9),i.INUSE_ATTRIBUTE_ERR=(a[10]="Attribute in use",10),i.INVALID_STATE_ERR=(a[11]="Invalid state",11),i.SYNTAX_ERR=(a[12]="Syntax error",12),i.INVALID_MODIFICATION_ERR=(a[13]="Invalid modification",13),i.NAMESPACE_ERR=(a[14]="Invalid namespace",14),i.INVALID_ACCESS_ERR=(a[15]="Invalid access",15);function c(e,t){var n;return t instanceof Error?n=t:(n=this,Error.call(this,a[e]),this.message=a[e],Error.captureStackTrace&&Error.captureStackTrace(this,c)),n.code=e,t&&(this.message=this.message+": "+t),n}function d(){}function u(e,t){this._node=e,this._refresh=t,s(this)}function s(e){var t,n=e._node._inc||e._node.ownerDocument._inc;e._inc!=n&&(t=e._refresh(e._node),z(e,"length",t.length),o(t,e),e._inc=n)}function y(){}function l(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function f(e,t,n,r){r?t[l(t,r)]=n:t[t.length++]=n,e&&(t=(n.ownerElement=e).ownerDocument)&&(r&&_(t,e,r),r=e,e=n,(n=t)&&n._inc++,"http://www.w3.org/2000/xmlns/"==e.namespaceURI)&&(r._nsMap[e.prefix?e.localName:""]=e.value)}function h(e,t,n){var r=l(t,n);if(!(0<=r))throw c(8,new Error(e.tagName+"@"+n));for(var o,i=t.length-1;r<i;)t[r]=t[++r];t.length=i,e&&(o=e.ownerDocument)&&(_(o,e,n),n.ownerElement=null)}function m(e){if(this._features={},e)for(var t in e)this._features=e[t]}function b(){}function v(e){return("<"==e?"&lt;":">"==e&&"&gt;")||("&"==e?"&amp;":'"'==e&&"&quot;")||"&#"+e.charCodeAt()+";"}function w(e,t){if(t(e))return 1;if(e=e.firstChild)do{if(w(e,t))return 1}while(e=e.nextSibling)}function g(){}function _(e,t,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete t._nsMap[n.prefix?n.localName:""]}function E(e,t,n){if(e&&e._inc){e._inc++;var r=t.childNodes;if(n)r[r.length++]=n;else{for(var o=t.firstChild,i=0;o;)o=(r[i++]=o).nextSibling;r.length=i}}}function O(e,t){var n=t.previousSibling,r=t.nextSibling;return n?n.nextSibling=r:e.firstChild=r,r?r.previousSibling=n:e.lastChild=n,E(e.ownerDocument,e),t}function S(e,t,n){var r=t.parentNode;if(r&&r.removeChild(t),11===t.nodeType){var o=t.firstChild;if(null==o)return t;var i=t.lastChild}else o=i=t;r=n?n.previousSibling:e.lastChild;for(o.previousSibling=r,i.nextSibling=n,r?r.nextSibling=o:e.firstChild=o,null==n?e.lastChild=i:n.previousSibling=i;o.parentNode=e,o!==i&&(o=o.nextSibling););return E(e.ownerDocument||e,e),11==t.nodeType&&(t.firstChild=t.lastChild=null),t}function j(){this._nsMap={}}function T(){}function k(){}function N(){}function P(){}function C(){}function x(){}function B(){}function H(){}function R(){}function A(){}function D(){}function F(){}function U(e,t){var n,r=[],o=9==this.nodeType&&this.documentElement||this,i=o.prefix,a=o.namespaceURI;return I(this,r,e,t,n=a&&null==i&&null==o.lookupPrefix(a)?[{namespace:a,prefix:null}]:n),r.join("")}function W(e,t,n){var r=e.prefix||"",o=e.namespaceURI;if((r||o)&&("xml"!==r||"http://www.w3.org/XML/1998/namespace"!==o)&&"http://www.w3.org/2000/xmlns/"!=o){for(var i=n.length;i--;){var a=n[i];if(a.prefix==r)return a.namespace!=o}return 1}}function I(e,t,n,r,o){if(r){if(!(e=r(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case 1:o=o||[];var i=e.attributes,a=i.length,c=e.firstChild,u=e.tagName;n="http://www.w3.org/1999/xhtml"===e.namespaceURI||n,t.push("<",u);for(var s=0;s<a;s++)"xmlns"==(l=i.item(s)).prefix?o.push({prefix:l.localName,namespace:l.value}):"xmlns"==l.nodeName&&o.push({prefix:"",namespace:l.value});for(var l,f,p,s=0;s<a;s++)W(l=i.item(s),0,o)&&(f=l.prefix||"",p=l.namespaceURI,t.push(f?" xmlns:"+f:" xmlns",'="',p,'"'),o.push({prefix:f,namespace:p})),I(l,t,n,r,o);if(W(e,0,o)&&(f=e.prefix||"",p=e.namespaceURI,t.push(f?" xmlns:"+f:" xmlns",'="',p,'"'),o.push({prefix:f,namespace:p})),c||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(u)){if(t.push(">"),n&&/^script$/i.test(u))for(;c;)c.data?t.push(c.data):I(c,t,n,r,o),c=c.nextSibling;else for(;c;)I(c,t,n,r,o),c=c.nextSibling;t.push("</",u,">")}else t.push("/>");return;case 9:case 11:for(c=e.firstChild;c;)I(c,t,n,r,o),c=c.nextSibling;return;case 2:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,v),'"');case 3:return t.push(e.data.replace(/[<&]/g,v));case 4:return t.push("<![CDATA[",e.data,"]]>");case 8:return t.push("\x3c!--",e.data,"--\x3e");case 10:var u=e.publicId,d=e.systemId;return t.push("<!DOCTYPE ",e.name),void(u?(t.push(' PUBLIC "',u),d&&"."!=d&&t.push('" "',d),t.push('">')):d&&"."!=d?t.push(' SYSTEM "',d,'">'):((u=e.internalSubset)&&t.push(" [",u,"]"),t.push(">")));case 7:return t.push("<?",e.target," ",e.data,"?>");case 5:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function z(e,t,n){e[t]=n}c.prototype=Error.prototype,o(i,c),d.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],r=0;r<this.length;r++)I(this[r],n,e,t);return n.join("")}},u.prototype.item=function(e){return s(this),this[e]},t(u,d),y.prototype={length:0,item:d.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new c(10);t=this.getNamedItem(e.nodeName);return f(this._ownerElement,this,e,t),t},setNamedItemNS:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new c(10);return t=this.getNamedItemNS(e.namespaceURI,e.localName),f(this._ownerElement,this,e,t),t},removeNamedItem:function(e){e=this.getNamedItem(e);return h(this._ownerElement,this,e),e},removeNamedItemNS:function(e,t){e=this.getNamedItemNS(e,t);return h(this._ownerElement,this,e),e},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var r=this[n];if(r.localName==t&&r.namespaceURI==e)return r}return null}},m.prototype={hasFeature:function(e,t){e=this._features[e.toLowerCase()];return!(!e||t&&!(t in e))},createDocument:function(e,t,n){var r=new g;return r.implementation=this,r.childNodes=new d,(r.doctype=n)&&r.appendChild(n),t&&(n=r.createElementNS(e,t),r.appendChild(n)),r},createDocumentType:function(e,t,n){var r=new x;return r.name=e,r.nodeName=e,r.publicId=t,r.systemId=n,r}},b.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return S(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return O(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return function e(t,n,r){var o=new n.constructor;for(var i in n){var a=n[i];"object"!=p(a)&&a!=o[i]&&(o[i]=a)}n.childNodes&&(o.childNodes=new d);o.ownerDocument=t;switch(o.nodeType){case 1:var c=n.attributes,u=o.attributes=new y,s=c.length;u._ownerElement=o;for(var l=0;l<s;l++)o.setAttributeNode(e(t,c.item(l),!0));break;case 2:r=!0}if(r)for(var f=n.firstChild;f;)o.appendChild(e(t,f,r)),f=f.nextSibling;return o}(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&3==t.nodeType&&3==e.nodeType?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var r in n)if(n[r]==e)return r;t=2==t.nodeType?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=2==t.nodeType?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},o(r,b),o(r,b.prototype),g.prototype={nodeName:"#document",nodeType:9,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(11==e.nodeType)for(var n=e.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,t),n=r}else null==this.documentElement&&1==e.nodeType&&(this.documentElement=e),S(this,e,t),e.ownerDocument=this;return e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),O(this,e)},importNode:function(e,t){return function e(t,n,r){var o;switch(n.nodeType){case 1:(o=n.cloneNode(!1)).ownerDocument=t;case 11:break;case 2:r=!0}o=o||n.cloneNode(!1);o.ownerDocument=t;o.parentNode=null;if(r)for(var i=n.firstChild;i;)o.appendChild(e(t,i,r)),i=i.nextSibling;return o}(this,e,t)},getElementById:function(t){var n=null;return w(this.documentElement,function(e){if(1==e.nodeType&&e.getAttribute("id")==t)return n=e,!0}),n},createElement:function(e){var t=new j;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new d,(t.attributes=new y)._ownerElement=t},createDocumentFragment:function(){var e=new A;return e.ownerDocument=this,e.childNodes=new d,e},createTextNode:function(e){var t=new N;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new P;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new C;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new D;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new T;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new R;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new j,r=t.split(":"),o=n.attributes=new y;return n.childNodes=new d,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,o._ownerElement=n},createAttributeNS:function(e,t){var n=new T,r=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,n}},t(g,b),g.prototype.getElementsByTagName=(j.prototype={nodeType:1,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){e=this.getAttributeNode(e);return e&&e.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){e=this.ownerDocument.createAttribute(e);e.value=e.nodeValue=""+t,this.setAttributeNode(e)},removeAttribute:function(e){e=this.getAttributeNode(e);e&&this.removeAttributeNode(e)},appendChild:function(e){return 11===e.nodeType?this.insertBefore(e,null):(t=this,(n=(e=e).parentNode)&&(r=t.lastChild,n.removeChild(e),r=t.lastChild),r=t.lastChild,e.parentNode=t,e.previousSibling=r,e.nextSibling=null,r?r.nextSibling=e:t.firstChild=e,t.lastChild=e,E(t.ownerDocument,t,e),e);var t,n,r},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){e=this.getAttributeNodeNS(e,t);e&&this.removeAttributeNode(e)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){e=this.getAttributeNodeNS(e,t);return e&&e.value||""},setAttributeNS:function(e,t,n){e=this.ownerDocument.createAttributeNS(e,t);e.value=e.nodeValue=""+n,this.setAttributeNode(e)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(r){return new u(this,function(t){var n=[];return w(t,function(e){e===t||1!=e.nodeType||"*"!==r&&e.tagName!=r||n.push(e)}),n})},getElementsByTagNameNS:function(r,o){return new u(this,function(t){var n=[];return w(t,function(e){e===t||1!==e.nodeType||"*"!==r&&e.namespaceURI!==r||"*"!==o&&e.localName!=o||n.push(e)}),n})}}).getElementsByTagName,g.prototype.getElementsByTagNameNS=j.prototype.getElementsByTagNameNS,t(j,b),T.prototype.nodeType=2,t(T,b),k.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(a[3])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){var r=this.data.substring(0,e),e=this.data.substring(e+t);this.nodeValue=this.data=n=r+n+e,this.length=n.length}},t(k,b),N.prototype={nodeName:"#text",nodeType:3,splitText:function(e){var t=(n=this.data).substring(e),n=n.substring(0,e),e=(this.data=this.nodeValue=n,this.length=n.length,this.ownerDocument.createTextNode(t));return this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling),e}},t(N,k),P.prototype={nodeName:"#comment",nodeType:8},t(P,k),C.prototype={nodeName:"#cdata-section",nodeType:4},t(C,k),x.prototype.nodeType=10,t(x,b),B.prototype.nodeType=12,t(B,b),H.prototype.nodeType=6,t(H,b),R.prototype.nodeType=5,t(R,b),A.prototype.nodeName="#document-fragment",A.prototype.nodeType=11,t(A,b),D.prototype.nodeType=7,t(D,b),F.prototype.serializeToString=function(e,t,n){return U.call(e,t,n)},b.prototype.toString=U;try{Object.defineProperty&&(n=function(e){switch(e.nodeType){case 1:case 11:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(n(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}},Object.defineProperty(u.prototype,"length",{get:function(){return s(this),this.$$length}}),Object.defineProperty(b.prototype,"textContent",{get:function(){return n(this)},set:function(e){switch(this.nodeType){case 1:case 11:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),z=function(e,t,n){e["$$"+t]=n})}catch(e){}e.DOMImplementation=m,e.XMLSerializer=F},{}],36:[function(e,t,n){n.entityMap={lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",nbsp:" ",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",times:"",divide:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",euro:"",trade:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lceil:"",rceil:"",lfloor:"",rfloor:"",loz:"",spades:"",clubs:"",hearts:"",diams:""}},{}],37:[function(e,t,n){var r=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,o=new RegExp("[\\-\\.0-9"+r.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+r.source+o.source+"*(?::"+r.source+o.source+"*)?$"),C=0,x=1,R=2,A=3,D=4,I=5,L=6,M=7;function a(){}function B(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function H(e,t,n){for(var r=e.tagName,o=null,i=e.length;i--;){var a=e[i],c=a.qName,u=a.value,c=0<(l=c.indexOf(":"))?(s=a.prefix=c.slice(0,l),f=c.slice(l+1),"xmlns"===s&&f):(s=null,"xmlns"===(f=c)&&"");a.localName=f,!1!==c&&(null==o&&(o={},d(n,n={})),n[c]=o[c]=u,a.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(c,u))}for(var s,i=e.length;i--;)(s=(a=e[i]).prefix)&&("xml"===s&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==s)&&(a.uri=n[s||""]);var l,f=0<(l=r.indexOf(":"))?(s=e.prefix=r.slice(0,l),e.localName=r.slice(l+1)):(s=null,e.localName=r),p=e.uri=n[s||""];if(t.startElement(p,f,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=o,1;if(t.endElement(p,f,r),o)for(s in o)t.endPrefixMapping(s)}function d(e,t){for(var n in e)t[n]=e[n]}function F(e){}a.prototype={parse:function(e,t,n){var r=this.domBuilder;r.startDocument(),d(t,t={}),((n,e,r,o,i)=>{function a(e){var t=e.slice(1,-1);return t in r?r[t]:"#"===t.charAt(0)?65535<(t=parseInt(t.substr(1).replace("x","0x")))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):String.fromCharCode(t):(i.error("entity not found:"+e),e)}function t(e){var t;y<e&&(t=n.substring(y,e).replace(/&#?\w+;/g,a),f&&c(y),o.characters(t,0,e-y),y=e)}function c(e,t){for(;s<=e&&(t=l.exec(n));)u=t.index,s=u+t[0].length,f.lineNumber++;f.columnNumber=e-u+1}for(var u=0,s=0,l=/.*(?:\r\n?|\n)|.*$/g,f=o.locator,p=[{currentNSMap:e}],d={},y=0;;){try{var h,m,b=n.indexOf("<",y);if(b<0)return n.substr(y).match(/^\s*$/)||(h=o.doc,m=h.createTextNode(n.substr(y)),h.appendChild(m),o.currentElement=m);switch(y<b&&t(b),n.charAt(b+1)){case"/":var v=n.indexOf(">",b+3),w=n.substring(b+2,v),g=p.pop(),_=(v<0?(w=n.substring(b+2).replace(/[\s<].*/,""),i.error("end tag name: "+w+" is not complete:"+g.tagName),v=b+1+w.length):w.match(/\s</)&&(w=w.replace(/[\s<].*/,""),i.error("end tag name: "+w+" maybe not complete"),v=b+1+w.length),g.localNSMap),E=g.tagName==w;if(E||g.tagName&&g.tagName.toLowerCase()==w.toLowerCase()){if(o.endElement(g.uri,g.localName,w),_)for(var O in _)o.endPrefixMapping(O);E||i.fatalError("end tag name: "+w+" is not match the current start tagName:"+g.tagName)}else p.push(g);v++;break;case"?":f&&c(b),v=((e,t,n)=>{var r=e.indexOf("?>",t);if(r){e=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(e)return e[0].length,n.processingInstruction(e[1],e[2]),r+2}return-1})(n,b,o);break;case"!":f&&c(b),v=((e,t,n,r)=>{var o,i;return"-"===e.charAt(t+2)?"-"===e.charAt(t+3)?(i=e.indexOf("--\x3e",t+4),t<i?(n.comment(e,t+4,i-t-4),i+3):(r.error("Unclosed comment"),-1)):-1:"CDATA["==e.substr(t+3,6)?(i=e.indexOf("]]>",t+9),n.startCDATA(),n.characters(e,t+9,i-t-9),n.endCDATA(),i+3):1<(i=(r=((e,t)=>{var n,r=[],o=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(o.lastIndex=t,o.exec(e);n=o.exec(e);)if(r.push(n),n[1])return r})(e,t)).length)&&/!doctype/i.test(r[0][0])?(e=r[1][0],t=3<i&&/^public$/i.test(r[2][0])&&r[3][0],o=4<i&&r[4][0],r=r[i-1],n.startDTD(e,t&&t.replace(/^(['"])(.*?)\1$/,"$2"),o&&o.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),r.index+r[0].length):-1})(n,b,o,i);break;default:f&&c(b);var S=new F,j=p[p.length-1].currentNSMap,v=((e,t,n,r,o,i)=>{for(var a,c=++t,u=C;;){var s=e.charAt(c);switch(s){case"=":if(u===x)a=e.slice(t,c);else if(u!==R)throw new Error("attribute equal must after attrName");u=A;break;case"'":case'"':if(u===A||u===x){if(u===x&&(i.warning('attribute value must after "="'),a=e.slice(t,c)),t=c+1,!(0<(c=e.indexOf(s,t))))throw new Error("attribute value no end '"+s+"' match");l=e.slice(t,c).replace(/&#?\w+;/g,o),n.add(a,l,t-1)}else{if(u!=D)throw new Error('attribute value must after "="');l=e.slice(t,c).replace(/&#?\w+;/g,o),n.add(a,l,t),i.warning('attribute "'+a+'" missed start quot('+s+")!!"),t=c+1}u=I;break;case"/":switch(u){case C:n.setTagName(e.slice(t,c));case I:case L:case M:u=M,n.closed=!0;case D:case x:case R:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return i.error("unexpected end of input"),u==C&&n.setTagName(e.slice(t,c)),c;case">":switch(u){case C:n.setTagName(e.slice(t,c));case I:case L:case M:break;case D:case x:"/"===(l=e.slice(t,c)).slice(-1)&&(n.closed=!0,l=l.slice(0,-1));case R:u===R&&(l=a),u==D?(i.warning('attribute "'+l+'" missed quot(")!!'),n.add(a,l.replace(/&#?\w+;/g,o),t)):("http://www.w3.org/1999/xhtml"===r[""]&&l.match(/^(?:disabled|checked|selected)$/i)||i.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),n.add(l,l,t));break;case A:throw new Error("attribute value missed!!")}return c;case"":s=" ";default:if(s<=" ")switch(u){case C:n.setTagName(e.slice(t,c)),u=L;break;case x:a=e.slice(t,c),u=R;break;case D:var l=e.slice(t,c).replace(/&#?\w+;/g,o);i.warning('attribute "'+l+'" missed quot(")!!'),n.add(a,l,t);case I:u=L}else switch(u){case R:n.tagName;"http://www.w3.org/1999/xhtml"===r[""]&&a.match(/^(?:disabled|checked|selected)$/i)||i.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),n.add(a,a,t),t=c,u=x;break;case I:i.warning('attribute space is required"'+a+'"!!');case L:u=x,t=c;break;case A:u=D,t=c;break;case M:throw new Error("elements closed character '/' and '>' must be connected to")}}c++}})(n,b,S,j,a,i),T=S.length;if(!S.closed&&((e,t,n,r)=>{var o=r[n];return null==o&&((o=e.lastIndexOf("</"+n+">"))<t&&(o=e.lastIndexOf("</"+n)),r[n]=o),o<t})(n,v,S.tagName,d)&&(S.closed=!0,r.nbsp||i.warning("unclosed xml attribute")),f&&T){for(var k=B(f,{}),N=0;N<T;N++){var P=S[N];c(P.offset),P.locator=B(f,{})}o.locator=k,H(S,o,j)&&p.push(S),o.locator=f}else H(S,o,j)&&p.push(S);"http://www.w3.org/1999/xhtml"!==S.uri||S.closed?v++:v=((e,t,n,r,o)=>{if(/^(?:script|textarea)$/i.test(n)){var i=e.indexOf("</"+n+">",t),e=e.substring(t+1,i);if(/[&<]/.test(e))return/^script$/i.test(n)?o.characters(e,0,e.length):(e=e.replace(/&#?\w+;/g,r),o.characters(e,0,e.length)),i}return t+1})(n,v,S.tagName,a,o)}}catch(e){i.error("element parse error: "+e),v=-1}y<v?y=v:t(Math.max(b,y)+1)}})(e,t,n,r,this.errorHandler),r.endDocument()}},F.prototype={setTagName:function(e){if(!i.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!i.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},n.XMLReader=a},{}]},{},[31]);